<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Teacher Activity Explorer</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  .search-section, .tags-section, .buttons { margin-bottom: 20px; }
  .tags-section button { margin: 3px; }
  .tags-section button.active { background-color: #4a90e2; color: white; }
  .activities { display: flex; flex-wrap: wrap; gap: 10px; }
  .activity { border: 1px solid #ccc; padding: 10px; width: 45%; box-sizing: border-box; }
  .activity h3 { margin-top: 0; }
</style>
</head>
<body>

<h1>Teacher Activity Explorer</h1>

<!-- Search Bar -->
<div class="search-section">
  <input type="text" id="searchBox" placeholder="Search by activity name">
  <button onclick="searchActivities()">Search</button>
</div>

<!-- Tag Buttons -->
<div class="tags-section" id="tagButtons">

  <h3>Stage (Academic Goal / Purpose)</h3>
  <div class="tag-group" id="layer1">
    <button>PRE-ASSESSMENT</button>
    <button>INTRODUCE</button>
    <button>READ</button>
    <button>ANALYZE</button>
    <button>REVIEW</button>
    <button>EVALUATE</button>
  </div>

  <h3>Genre / Focus - Literary</h3>
  <div class="tag-group" id="layer2-literary">
    <button>LONG TEXT</button>
    <button>SHORT TEXT</button>
    <button>POETRY</button>
    <button>VISUAL ART</button>
  </div>

  <h3>Genre / Focus - Informational</h3>
  <div class="tag-group" id="layer2-info">
    <button>SPEECH</button>
    <button>ARTICLE / ESSAY</button>
    <button>VISUAL ART / MEDIA</button>
  </div>

  <h3>Mechanics</h3>
  <div class="tag-group" id="layer2-mech">
    <button>VOCABULARY</button>
    <button>GRAMMAR</button>
    <button>PUNCTUATION</button>
  </div>

  <h3>Production / Creation Type</h3>
  <div class="tag-group" id="layer3">
    <button>WRITING (short)</button>
    <button>WRITING (long)</button>
    <button>WRITING (creative)</button>
    <button>DISCUSSION</button>
    <button>VISUAL ART</button>
  </div>

  <h3>Miscellaneous</h3>
  <div class="tag-group" id="layer4">
    <button>Games</button>
    <button>Icebreakers</button>
    <button>Forming Groups</button>
  </div>

</div>

<div class="buttons">
  <button onclick="filterByTags()">Go (Tags)</button>
  <button onclick="pickRandomActivities()">Re-roll</button>
  <button onclick="resetTags()">Back</button>
</div>

<!-- Activity Windows -->
<div class="activities" id="activityContainer">
  <div class="activity"><h3>Activity 1</h3><p>Description...</p></div>
  <div class="activity"><h3>Activity 2</h3><p>Description...</p></div>
  <div class="activity"><h3>Activity 3</h3><p>Description...</p></div>
  <div class="activity"><h3>Activity 4</h3><p>Description...</p></div>
</div>

<script>
let activities = [];
let filteredActivities = [];
let currentTags = [];

// Layers/Tags
const tags = [
  "PRE-ASSESSMENT","INTRODUCE","READ","ANALYZE","REVIEW","EVALUATE",
  "LONG TEXT","SHORT TEXT","POETRY","VISUAL ART","SPEECH","ARTICLE / ESSAY","VISUAL ART / MEDIA",
  "VOCABULARY","GRAMMAR","PUNCTUATION","WRITING (short)","WRITING (long)","WRITING (creative)",
  "DISCUSSION","Games","Icebreakers","Forming Groups"
];

// Hook into existing buttons and enable toggling
const allTagButtons = document.querySelectorAll(".tags-section button");
allTagButtons.forEach(btn => {
  btn.addEventListener("click", () => {
    btn.classList.toggle("active");
    // Update currentTags array
    currentTags = Array.from(document.querySelectorAll(".tags-section button.active"))
                       .map(b => b.innerText);
  });
});


// Load activities JSON and convert to expected structure
fetch('activities.json')
  .then(res => res.json())
  .then(data => {
    // Convert your JSON into the structure JS expects
    activities = data.map(a => ({
      title: a["Activity Name"],
      description: a["Description"],
      tags: [
        ...(a["Stage (Layer 1)"] ? a["Stage (Layer 1)"].split(" / ") : []),
        ...(a["Genre/Production (Layer 2/3)"] ? a["Genre/Production (Layer 2/3)"].split(" / ") : []),
        ...(a["Miscellaneous Tags"] && a["Miscellaneous Tags"] !== "-" ? a["Miscellaneous Tags"].split(",").map(t => t.trim()) : [])
      ]
    }));
    filteredActivities = [...activities];
    pickRandomActivities();
  })
  .catch(err => console.error("Error loading activities:", err));

// Pick 4 random activities
function pickRandomActivities() {
  const copy = [...filteredActivities];
  const result = [];
  while(result.length < 4 && copy.length > 0){
    const index = Math.floor(Math.random() * copy.length);
    result.push(copy.splice(index,1)[0]);
  }
  renderActivities(result);
}

// Render activities in the 4 windows
function renderActivities(list) {
  const container = document.getElementById("activityContainer");
  const windows = container.querySelectorAll(".activity");
  windows.forEach((win, i) => {
    if(list[i]) {
      win.querySelector("h3").innerText = list[i].title;
      win.querySelector("p").innerText = list[i].description;
    } else {
      win.querySelector("h3").innerText = "No Activity";
      win.querySelector("p").innerText = "";
    }
  });
}

// Search by name
function searchActivities() {
  const query = document.getElementById("searchBox").value.toLowerCase();
  filteredActivities = activities.filter(a => a.title.toLowerCase().includes(query));
  pickRandomActivities();
}

// Filter by tags
function filterByTags() {
  if(currentTags.length === 0) {
    filteredActivities = [...activities];
  } else {
    filteredActivities = activities.filter(a => currentTags.some(t => a.tags.includes(t)));
  }
  pickRandomActivities();
}

// Reset tags and search
function resetTags() {
  document.getElementById("searchBox").value = "";
  document.querySelectorAll(".tags-section button.active").forEach(b => b.classList.remove("active"));
  currentTags = [];
  filteredActivities = [...activities];
  pickRandomActivities();
}
</script>
<script>
fetch('activities.json')
  .then(response => response.json())
  .then(data => {
    console.log(data); // This will print your activities to the browser console
  })
  .catch(error => console.error('Error loading JSON:', error));
</script>

</body>
</html>





