<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Teacher Activity Explorer</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; background: #f9f9f9; }
  h1 { color: #333; }
  .search-section, .tags-section, .buttons { margin-bottom: 20px; }
  .tags-section { display: flex; flex-wrap: wrap; gap: 10px; }
  .tags-section h2 { width: 100%; color: #555; margin: 10px 0 5px 0; }
  .tags-section button { margin: 3px; padding: 6px 12px; border: none; border-radius: 4px; background: #eee; cursor: pointer; transition: 0.2s; }
  .tags-section button.active { background-color: #4a90e2; color: white; }
  .buttons button { margin-right: 10px; padding: 6px 12px; border: none; border-radius: 4px; background: #4a90e2; color: white; cursor: pointer; }
  .activities { display: flex; flex-wrap: wrap; gap: 15px; }
  .activity { border: 1px solid #ccc; padding: 10px; width: 30%; box-sizing: border-box; background: #fff; border-radius: 6px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
  .activity h3 { margin-top: 0; color: #2c3e50; }
  .activity p { color: #444; }
  .activity .tags { font-size: 0.85em; color: #999; margin-top: 6px; }
</style>
</head>
<body>

<h1>Teacher Activity Explorer</h1>

<!-- Search Bar -->
<div class="search-section">
  <input type="text" id="searchBox" placeholder="Search by activity name">
  <button onclick="searchActivities()">Search</button>
</div>

<!-- Tag Buttons -->
<div class="tags-section" id="tagButtons"></div>
<div class="buttons">
  <button onclick="filterByTags()">Go</button>
</div>

<!-- Activity Windows -->
<div class="activities" id="activityContainer">
  <div class="activity"><h3>Activity 1</h3><p>Description...</p><div class="tags"></div></div>
  <div class="activity"><h3>Activity 2</h3><p>Description...</p><div class="tags"></div></div>
  <div class="activity"><h3>Activity 3</h3><p>Description...</p><div class="tags"></div></div>
  <div class="activity"><h3>Activity 4</h3><p>Description...</p><div class="tags"></div></div>
  <div class="activity"><h3>Activity 5</h3><p>Description...</p><div class="tags"></div></div>
  <div class="activity"><h3>Activity 6</h3><p>Description...</p><div class="tags"></div></div>
</div>

<script>
let activities = [];
let filteredActivities = [];
let currentTags = [];

// Tag headings and buttons
const tagData = {
  "Stage (Layer 1)": ["PRE-ASSESSMENT","INTRODUCE","READ","ANALYZE","REVIEW","EVALUATE"],
  "Genre / Focus": ["LONG TEXT","SHORT TEXT","POETRY","VISUAL ART","SPEECH","ARTICLE / ESSAY","VISUAL ART / MEDIA","VOCABULARY","GRAMMAR","PUNCTUATION"],
  "Production / Creation Type": ["WRITING (short)","WRITING (long)","WRITING (creative)","DISCUSSION","VISUAL ART"],
  "Miscellaneous": ["Games","Icebreakers","Forming Groups"]
};

// Build tag buttons
const tagContainer = document.getElementById("tagButtons");
for(const heading in tagData){
  const h2 = document.createElement("h2");
  h2.innerText = heading;
  tagContainer.appendChild(h2);
  
  tagData[heading].forEach(tag => {
    const btn = document.createElement("button");
    btn.innerText = tag;
    btn.onclick = () => {
      btn.classList.toggle("active");
      currentTags = Array.from(document.querySelectorAll(".tags-section button.active")).map(b => b.innerText);
    };
    tagContainer.appendChild(btn);
  });
}

// Load activities JSON
fetch('activities.json')
  .then(res => res.json())
  .then(data => {
    activities = data.map(a => {
      const layer1 = a["Stage (Layer 1)"] ? a["Stage (Layer 1)"].split(" / ").map(t => t.trim()).filter(Boolean) : [];
      const layer23 = a["Genre/Production (Layer 2/3)"] ? a["Genre/Production (Layer 2/3)"].split(" / ").map(t => t.trim()).filter(Boolean) : [];
      const misc = a["Miscellaneous Tags"] ? a["Miscellaneous Tags"].split(",").map(t => t.trim()).filter(Boolean) : [];
      return {
        title: a["Activity Name"] || "Untitled Activity",
        description: a["Description"] || "",
        tags: [...layer1, ...layer23, ...misc]
      }
    });
    filteredActivities = [...activities];
    pickRandomActivities();
  })
  .catch(err => console.error("Error loading activities:", err));

// Pick 6 random activities
function pickRandomActivities() {
  const copy = [...filteredActivities];
  const result = [];
  while(result.length < 6 && copy.length > 0){
    const index = Math.floor(Math.random() * copy.length);
    result.push(copy.splice(index,1)[0]);
  }
  renderActivities(result);
}

// Render activities
function renderActivities(list) {
  const container = document.getElementById("activityContainer");
  const windows = container.querySelectorAll(".activity");
  windows.forEach((win, i) => {
    if(list[i]) {
      win.querySelector("h3").innerText = list[i].title;
      win.querySelector("p").innerText = list[i].description;
      win.querySelector(".tags").innerText = list[i].tags.join(", ");
    } else {
      win.querySelector("h3").innerText = "No Activity";
      win.querySelector("p").innerText = "";
      win.querySelector(".tags").innerText = "";
    }
  });
}

// Search by name
function searchActivities() {
  const query = document.getElementById("searchBox").value.toLowerCase();
  filteredActivities = activities.filter(a => a.title.toLowerCase().includes(query));
  pickRandomActivities();
}

// Filter by tags (AND logic)
function filterByTags() {
  if(currentTags.length === 0) {
    filteredActivities = [...activities];
  } else {
    filteredActivities = activities.filter(a => currentTags.every(t => a.tags.includes(t)));
  }
  pickRandomActivities();
}
</script>

</body>
</html>







